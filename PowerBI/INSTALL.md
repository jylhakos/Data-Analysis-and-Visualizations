# Fish weight prediction

## Overview

This quick start guide will get you up and running with the Fish Weight Prediction project in minutes. The project demonstrates supervised learning using scikit-learn, orchestrated with Apache Airflow, and visualized with Power BI or Tableau.

## Prerequisites

- Linux/Debian system
- Python 3.8 or higher
- Internet connection for package downloads
- Web browser for Power BI Service or Tableau Public

## Setup

### Step 1: Clone and setup environment

```bash
# Navigate to the project directory
cd "PowerBI"

# Run the automated setup script
./setup.sh
```

The setup script will:
- Create a Python virtual environment
- Install all required packages
- Set up project directories
- Verify the installation

### Step 2: Activate environment

```bash
# Activate the environment
source activate_env.sh
```

### Step 3: Run test

```bash
# Test that everything is working
python scripts/quick_test.py
```

Expected output:
```
Fish Weight Prediction - Quick Test
========================================
✓ Data loaded: (159, 7)
✓ Model trained - R² Score: 0.9234
Setup is working perfectly!
```

## Running the analysis

### Option 1: Run analysis Script

```bash
# Run the comprehensive analysis
python scikit-learn/fish_predictive_model.py
```

This will:
- Load and explore the Fish.csv dataset
- Train multiple ML models
- Generate visualizations
- Save the best model
- Create prediction examples

### Option 2: Prepare data for Power BI

```bash
# Generate Power BI ready datasets
python powerbi_integration.py
```

This creates:
- Enhanced CSV files with predictions
- Data model files for Power BI
- DAX measures and Python code snippets

## Power BI integration (Web Browser)

### Method 1: Power BI service (Recommended)

1. **Open your web browser** and go to [app.powerbi.com](https://app.powerbi.com)
2. **Sign in** with your Microsoft account (free accounts available)
3. **Get Data** → Upload a file → Choose `fish_data_with_predictions.csv`
4. **Create visualizations** using the loaded data

### Method 2: Power BI desktop (Windows VM/Dual Boot)

If you have access to Windows:
1. Download Power BI Desktop from Microsoft
2. Import the generated CSV files
3. Use the provided DAX measures and Python scripts

## Tableau (Linux)

### Using Tableau public

1. **Go to** [public.tableau.com](https://public.tableau.com)
2. **Create free account** and sign in
3. **Create a Viz** → Upload from computer
4. **Select** `tableau_fish_data.csv` (generated by the integration script)
5. **Build dashboards** following the Tableau integration guide

## Project

```
Fish Weight Prediction Project/
├── fish_analysis_env/          # Python virtual environment
├── Dataset/
│   └── Fish.csv               # Original dataset
├── scikit-learn/
│   ├── fish_predictive_model.py    # Main ML script
│   ├── fish_analysis.py            # Additional analysis
│   └── requirements.txt            # scikit-learn dependencies
├── Apache Airflow/
│   ├── fish_prediction_dag.py      # Airflow pipeline
│   └── requirements.txt            # Airflow dependencies
├── data/                      # Processed datasets
├── models/                    # Trained ML models
├── output/                    # Analysis outputs
├── powerbi_output/           # Power BI ready files
├── scripts/                  # Utility scripts
├── notebooks/               # Jupyter notebooks
├── powerbi_integration.py    # Power BI data prep
├── tableau_integration_guide.md  # Tableau setup guide
├── requirements.txt         # Main dependencies
├── setup.sh                # Automated setup script
├── activate_env.sh         # Environment activation
└── README.md               # Complete documentation
```

## Features

### Machine Learning pipeline
- **Data loading**: Automatic CSV processing
- **Preprocessing**: Species encoding, feature scaling
- **Model Training**: Multiple algorithms (Random Forest, Linear Regression, etc.)
- **Evaluation**: Cross-validation, performance metrics
- **Prediction**: Real-time fish weight prediction

### Apache Airflow integration
- **Automated Pipeline**: Daily ML model retraining
- **Task Orchestration**: Data extraction → preprocessing → training → prediction
- **Monitoring**: Pipeline status and performance tracking
- **Scalability**: Docker containerization ready

### Power BI/Tableau visualization
- **Interactive Dashboards**: Species analysis, prediction accuracy
- **Real-time Updates**: Automatic data refresh
- **Custom Visuals**: Python-generated charts in Power BI
- **Performance Metrics**: Model accuracy tracking

## Commands

```bash
# Environment management
source activate_env.sh          # Activate environment
deactivate                      # Deactivate environment

# Analysis
python scikit-learn/fish_predictive_model.py    # Full analysis
python powerbi_integration.py                   # Power BI prep
python scripts/quick_test.py                    # Quick test

# Jupyter notebook
jupyter notebook                # Start Jupyter for interactive analysis

# Apache Airflow (advanced)
airflow webserver -p 8080      # Start Airflow web interface
airflow scheduler               # Start Airflow scheduler
```

## Results

### Model performance
- **R² Score**: ~0.92-0.95 (excellent prediction accuracy)
- **Mean Absolute Error**: ~20-30 grams
- **Mean Percentage Error**: ~5-8%

### Files
- `fish_regression_model.pkl` - Trained ML model
- `fish_data_with_predictions.csv` - Enhanced dataset
- `powerbi_data/` - Power BI optimized files
- Various visualization plots (PNG format)

## Troubleshooting

### Issues

**Issue**: `ModuleNotFoundError: No module named 'pandas'`
**Solution**: Ensure virtual environment is activated: `source activate_env.sh`

**Issue**: `FileNotFoundError: Fish.csv not found`
**Solution**: Ensure you're in the correct directory and Dataset/Fish.csv exists

**Issue**: Poor model performance (R² < 0.8)
**Solution**: Check data quality, try different hyperparameters

**Issue**: Power BI Python visuals not working
**Solution**: Enable Python scripting in Power BI settings

1. **Check README.md** for detailed documentation
2. **Run quick test** to verify setup: `python scripts/quick_test.py`
3. **Check logs** in the `logs/` directory
4. **Verify data** using `python -c "import pandas as pd; print(pd.read_csv('Dataset/Fish.csv').head())"`

---
